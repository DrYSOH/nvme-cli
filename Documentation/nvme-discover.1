'\" t
.\"     Title: nvme-discover
.\"    Author: [see the "AUTHORS" section]
.\" Generator: DocBook XSL Stylesheets v1.76.1 <http://docbook.sf.net/>
.\"      Date: 09/30/2016
.\"    Manual: NVMe Manual
.\"    Source: NVMe
.\"  Language: English
.\"
.TH "NVME\-DISCOVER" "1" "09/30/2016" "NVMe" "NVMe Manual"
.\" -----------------------------------------------------------------
.\" * Define some portability stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
nvme-discover \- Send Get Log Page request to Discovery Controller\&.
.SH "SYNOPSIS"
.sp
.nf
\fInvme discover\fR [device]
                [\-\-transport=<trtype> | \-t <trtype>]
                [\-\-traddr=<traddr>    | \-a <traddr>]
                [\-\-trsvcid=<trsvcid>  | \-s <trsvcid>]
                [\-\-hostnqn=<hostnqn>  | \-q <hostnqn>]
                [\-\-raw=<filename>     | \-r <filename>]
.fi
.SH "DESCRIPTION"
.sp
For a given NVMe Host, send a Discovery Get Log Page request to a Discovery Controller on the network\&.
.sp
The [device] parameter is OPTIONAL and will default to /dev/nvme\-fabrics if none is given\&.
.sp
If no parameters are given, then \fInvme discover\fR will attempt to find a /etc/nvme/discovery\&.conf file to use to supply the the discover command options\&. If no /etc/nvme/discovery\&.conf file exists, the command will quit with an error\&.
.SH "BACKGROUND"
.sp
The NVMe\-over\-Fabrics specification defines the concept of a Discovery Controller that an NVMe Host can query on a fabric network to discover NVMe subsystems contained in NVMe Targets which it can connect to on the network\&. The Discovery Controller will return Discovery Log Pages that provide the NVMe Host with specific information (such as network address and unique subsystem NQN) the NVMe Host can use to issue an NVMe connect command to connect itself to a storage resource contained in that NVMe subsystem on the NVMe Target\&.
.sp
Note that the base NVMe specfication defines the NQN (NVMe Qualified Name) format which an NVMe endpoint (device, subsystem, etc) must follow to guarantee a unique name under the NVMe standard\&.
.sp
A Discovery Controller has it\(cqs own NQN defined in the NVMe\-over\-Fabrics specification, \fBnqn\&.2014\-08\&.org\&.nvmexpress\&.discovery\fR\&. All Discovery Controllers must use this NQN name\&. This NQN is used by default by nvme\-cli for the \fIdiscover\fR command\&.
.SH "OPTIONS"
.PP
\-t <trtype>, \-\-transport=<trtype>
.RS 4
This field specifies the network fabric being used for a NVMe\-over\-Fabrics network\&. Current string values include:
.TS
allbox tab(:);
lt lt
lt lt
lt lt.
T{
Value
T}:T{
Definition
T}
T{
rdma
T}:T{
The network fabric is an rdma network (RoCE, iWARP, Infiniband, basic rdma, etc)
T}
T{
fc
T}:T{
\fBWIP\fR
The network fabric is a Fibre Channel network\&.
T}
.TE
.sp 1
.RE
.PP
\-a <traddr>, \-\-traddr=<traddr>
.RS 4
This field specifies the network address of the Discovery Controller\&.
.RE
.PP
\-s <trsvcid>, \-\-trsvcid=<trsvcid>
.RS 4
This field specifies the transport service id\&. For IP addresses, this field is the port number\&. By default, the IP port number is 4420\&.
.RE
.PP
\-q <hostnqn>, \-\-hostnqn=<hostnqn>
.RS 4
This field is the unique NQN of a NVMe Host\&. This field will be used by the Discovery Controller to check what NVMe Target resources are allocated to the NVMe Host for a connection\&.
.RE
.PP
\-r <filename>, \-\-raw=<filename>
.RS 4
This field will take the output of the
\fInvme discover\fR
command and dump it to a raw binary file\&. By default
\fInvme discover\fR
will dump the output to stdout\&.
.RE
.SH "EXAMPLES"
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
Query the Discover Controller with IP4 address 192\&.168\&.1\&.3 for all resources allocated for NVMe Host name host1\-rogue\-nqn on the RDMA network\&. Port 4420 is used by default:
.sp
.if n \{\
.RS 4
.\}
.nf
# nvme discover \-\-transport=rdma \-\-traddr=192\&.168\&.1\&.3 \e
\-\-hostnqn=host1\-rogue\-nqn
.fi
.if n \{\
.RE
.\}
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
Issue a
\fInvme discover\fR
command using a /etc/nvme/discovery\&.conf file:
.RE
.sp
.if n \{\
.RS 4
.\}
.nf
# Machine default\&. Note currently only works for single command:
\-t rdma \-a 192\&.168\&.1\&.4 \-s 4420 \-q nqn\&.2014\-08\&.com\&.example:nvme:nvm\-subsystem\-sn\-d78432

At the prompt type "nvme discover"\&.
.fi
.if n \{\
.RE
.\}
.SH "SEE ALSO"
.sp
nvme\-connect(1)
.SH "AUTHORS"
.sp
This was written by \m[blue]\fBJay Freyensee\fR\m[]\&\s-2\u[1]\d\s+2 for \m[blue]\fBKeith Busch\fR\m[]\&\s-2\u[2]\d\s+2\&.
.SH "REPORTING BUGS"
.sp
Patches and issues for \fIdiscover\fR should be submitted to the Linux kernel email list \m[blue]\fBlinux\-nvme\fR\m[]\&\s-2\u[3]\d\s+2 before merging to \m[blue]\fBhttps://github\&.com/linux\-nvme/nvme\-cli\fR\m[]\&.
.SH "NVME"
.sp
Part of the nvme\-user suite
.SH "NOTES"
.IP " 1." 4
Jay Freyensee
.RS 4
\%mailto:james.p.freyensee@intel.com
.RE
.IP " 2." 4
Keith Busch
.RS 4
\%mailto:keith.busch@intel.com
.RE
.IP " 3." 4
linux-nvme
.RS 4
\%mailto:linux-nvme@lists.infradead.org
.RE
